<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Placeholder Generator - Free Image Placeholder Service</title>
    <meta name="description" content="Generate custom placeholder images with various sizes, colors, and text. Free alternative to placehold.co">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Highlight.js -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/default.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    
    <style>
        .bg-gradient-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .preview-container {
            min-height: 300px;
            background: repeating-conic-gradient(#f8f9fa 0% 25%, #e9ecef 25% 50%) 50% / 20px 20px;
        }
        .code-block {
            background: #1a1a1a;
            border-radius: 8px;
            overflow-x: auto;
        }
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
        }
        canvas {
            max-width: 100%;
            height: auto;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body class="bg-light">
    <!-- Toast Notification -->
    <div id="toast" class="toast align-items-center text-white bg-success border-0" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="d-flex">
            <div class="toast-body">
                <i class="fas fa-check-circle me-2"></i>URL copied to clipboard!
            </div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
        </div>
    </div>

    <!-- Header -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-gradient-primary shadow-sm">
        <div class="container">
            <a class="navbar-brand fw-bold" href="#">
                <i class="fas fa-image me-2"></i>Placeholder Generator
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#generator"><i class="fas fa-cogs me-1"></i>Generator</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#api"><i class="fas fa-code me-1"></i>API</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#examples"><i class="fas fa-images me-1"></i>Examples</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="bg-gradient-primary text-white py-5">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6">
                    <h1 class="display-4 fw-bold mb-3">Generate Perfect Placeholder Images</h1>
                    <p class="lead mb-4">Create custom placeholder images with any size, color, and text. Perfect for web development, design mockups, and prototyping.</p>
                    <a href="#generator" class="btn btn-light btn-lg">
                        <i class="fas fa-play me-2"></i>Get Started
                    </a>
                </div>
                <div class="col-lg-6 text-center">
                    <canvas id="heroCanvas" width="400" height="300" class="shadow-lg"></canvas>
                </div>
            </div>
        </div>
    </section>

    <!-- Generator Section -->
    <section id="generator" class="py-5">
        <div class="container">
            <h2 class="text-center mb-5">
                <i class="fas fa-cogs text-primary me-2"></i>Image Generator
            </h2>
            
            <div class="row">
                <!-- Controls -->
                <div class="col-lg-4 mb-4">
                    <div class="card shadow-sm">
                        <div class="card-header bg-primary text-white">
                            <h5 class="mb-0"><i class="fas fa-sliders-h me-2"></i>Customize</h5>
                        </div>
                        <div class="card-body">
                            <!-- Size -->
                            <div class="mb-3">
                                <label class="form-label fw-semibold">
                                    <i class="fas fa-expand-arrows-alt text-primary me-1"></i>Size
                                </label>
                                <div class="row">
                                    <div class="col-6">
                                        <input type="number" id="width" class="form-control" value="400" min="1" max="2000" placeholder="Width">
                                    </div>
                                    <div class="col-6">
                                        <input type="number" id="height" class="form-control" value="300" min="1" max="2000" placeholder="Height">
                                    </div>
                                </div>
                                <div class="mt-2">
                                    <small class="text-muted">Quick sizes:</small>
                                    <div class="btn-group-sm mt-1">
                                        <button class="btn btn-outline-secondary btn-sm me-1" onclick="setSize(300,250)">300×250</button>
                                        <button class="btn btn-outline-secondary btn-sm me-1" onclick="setSize(600,400)">600×400</button>
                                        <button class="btn btn-outline-secondary btn-sm" onclick="setSize(800,600)">800×600</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Background Color -->
                            <div class="mb-3">
                                <label class="form-label fw-semibold">
                                    <i class="fas fa-fill-drip text-primary me-1"></i>Background Color
                                </label>
                                <div class="input-group">
                                    <input type="color" id="bgColor" class="form-control form-control-color" value="#cccccc">
                                    <input type="text" id="bgColorText" class="form-control" value="cccccc" placeholder="Hex color">
                                </div>
                            </div>

                            <!-- Text Color -->
                            <div class="mb-3">
                                <label class="form-label fw-semibold">
                                    <i class="fas fa-font text-primary me-1"></i>Text Color
                                </label>
                                <div class="input-group">
                                    <input type="color" id="textColor" class="form-control form-control-color" value="#333333">
                                    <input type="text" id="textColorText" class="form-control" value="333333" placeholder="Hex color">
                                </div>
                            </div>

                            <!-- Text -->
                            <div class="mb-3">
                                <label class="form-label fw-semibold">
                                    <i class="fas fa-comment text-primary me-1"></i>Custom Text
                                </label>
                                <input type="text" id="customText" class="form-control" placeholder="Enter custom text">
                                <small class="text-muted">Leave empty to show dimensions</small>
                            </div>

                            <!-- Font Size -->
                            <div class="mb-3">
                                <label class="form-label fw-semibold">
                                    <i class="fas fa-text-height text-primary me-1"></i>Font Size
                                </label>
                                <input type="range" id="fontSize" class="form-range" min="12" max="72" value="24">
                                <small class="text-muted">Size: <span id="fontSizeValue">24</span>px</small>
                            </div>

                            <!-- Format -->
                            <div class="mb-3">
                                <label class="form-label fw-semibold">
                                    <i class="fas fa-file-image text-primary me-1"></i>Format
                                </label>
                                <select id="format" class="form-select">
                                    <option value="png">PNG</option>
                                    <option value="jpg">JPEG</option>
                                    <option value="webp">WebP</option>
                                </select>
                            </div>

                            <div class="d-grid gap-2">
                                <button class="btn btn-primary" onclick="generateImage()">
                                    <i class="fas fa-magic me-2"></i>Generate Image
                                </button>
                                <button class="btn btn-outline-secondary" onclick="downloadImage()">
                                    <i class="fas fa-download me-2"></i>Download
                                </button>
                                <button class="btn btn-outline-info" onclick="copyURL()">
                                    <i class="fas fa-copy me-2"></i>Copy URL
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Preview -->
                <div class="col-lg-8">
                    <div class="card shadow-sm">
                        <div class="card-header bg-success text-white">
                            <h5 class="mb-0"><i class="fas fa-eye me-2"></i>Preview</h5>
                        </div>
                        <div class="card-body preview-container d-flex align-items-center justify-content-center">
                            <canvas id="previewCanvas" width="400" height="300"></canvas>
                        </div>
                        <div class="card-footer">
                            <div class="row">
                                <div class="col-md-8">
                                    <small class="text-muted">Generated URL:</small>
                                    <input type="text" id="generatedURL" class="form-control form-control-sm" readonly>
                                </div>
                                <div class="col-md-4 d-flex align-items-end">
                                    <button class="btn btn-sm btn-outline-primary w-100" onclick="copyURL()">
                                        <i class="fas fa-copy me-1"></i>Copy
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- API Documentation -->
    <section id="api" class="py-5 bg-white">
        <div class="container">
            <h2 class="text-center mb-5">
                <i class="fas fa-code text-primary me-2"></i>API Documentation
            </h2>
            
            <div class="row">
                <div class="col-lg-6 mb-4">
                    <div class="card h-100">
                        <div class="card-header">
                            <h5><i class="fas fa-link me-2"></i>Basic Usage</h5>
                        </div>
                        <div class="card-body">
                            <p>Generate placeholder images using simple URL parameters:</p>
                            <div class="code-block p-3 mb-3">
                                <code class="text-white">
https://arlabs07.github.io/Arhub07.github.io/library/placeholder.html#/400x300
                                </code>
                            </div>
                            <p>This creates a 400×300 pixel placeholder image.</p>
                        </div>
                    </div>
                </div>

                <div class="col-lg-6 mb-4">
                    <div class="card h-100">
                        <div class="card-header">
                            <h5><i class="fas fa-palette me-2"></i>With Colors</h5>
                        </div>
                        <div class="card-body">
                            <p>Add background and text colors:</p>
                            <div class="code-block p-3 mb-3">
                                <code class="text-white">
#/400x300/ff6b6b/ffffff
                                </code>
                            </div>
                            <p>Format: size/background-color/text-color</p>
                        </div>
                    </div>
                </div>

                <div class="col-lg-6 mb-4">
                    <div class="card h-100">
                        <div class="card-header">
                            <h5><i class="fas fa-font me-2"></i>Custom Text</h5>
                        </div>
                        <div class="card-body">
                            <p>Add custom text to your placeholder:</p>
                            <div class="code-block p-3 mb-3">
                                <code class="text-white">
#/400x300/cccccc/333333/Hello%20World
                                </code>
                            </div>
                            <p>Use URL encoding for spaces and special characters.</p>
                        </div>
                    </div>
                </div>

                <div class="col-lg-6 mb-4">
                    <div class="card h-100">
                        <div class="card-header">
                            <h5><i class="fas fa-cog me-2"></i>Parameters</h5>
                        </div>
                        <div class="card-body">
                            <ul class="list-unstyled">
                                <li><strong>Size:</strong> width×height (e.g., 300×200)</li>
                                <li><strong>Background:</strong> Hex color without #</li>
                                <li><strong>Text Color:</strong> Hex color without #</li>
                                <li><strong>Text:</strong> URL encoded string</li>
                                <li><strong>Format:</strong> png, jpg, webp</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Examples -->
    <section id="examples" class="py-5 bg-light">
        <div class="container">
            <h2 class="text-center mb-5">
                <i class="fas fa-images text-primary me-2"></i>Examples
            </h2>
            
            <div class="row" id="examplesContainer">
                <!-- Examples will be generated by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-dark text-white py-4">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h5><i class="fas fa-image me-2"></i>Placeholder Generator</h5>
                    <p>Free and open-source placeholder image service for developers and designers.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="mb-0">Built with ❤️ using modern web technologies</p>
                    <small class="text-muted">Tailwind CSS • Bootstrap • Font Awesome • Canvas API</small>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>

    <script>
        // Initialize highlight.js
        hljs.highlightAll();

        // Global variables
        let currentCanvas = null;
        let currentDataURL = '';
        let isInitialized = false;

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            initializeEventListeners();
            // Handle hash parameters first, then generate image
            if (window.location.hash) {
                handleHashParameters();
            } else {
                generateImage();
            }
            generateHeroImage();
            generateExamples();
            isInitialized = true;
        });

        // Event listeners
        function initializeEventListeners() {
            // Color inputs sync with validation
            document.getElementById('bgColor').addEventListener('input', function() {
                document.getElementById('bgColorText').value = this.value.substring(1);
                if (isInitialized) generateImage();
            });

            document.getElementById('bgColorText').addEventListener('input', function() {
                let color = this.value.replace('#', '').toLowerCase();
                // Allow 3-character hex codes
                if (color.length === 3) {
                    color = color.split('').map(c => c + c).join('');
                }
                if ((color.length === 6 || color.length === 3) && /^[0-9a-f]+$/i.test(color)) {
                    if (color.length === 6) {
                        document.getElementById('bgColor').value = '#' + color;
                        if (isInitialized) generateImage();
                    }
                }
            });

            document.getElementById('textColor').addEventListener('input', function() {
                document.getElementById('textColorText').value = this.value.substring(1);
                if (isInitialized) generateImage();
            });

            document.getElementById('textColorText').addEventListener('input', function() {
                let color = this.value.replace('#', '').toLowerCase();
                // Allow 3-character hex codes
                if (color.length === 3) {
                    color = color.split('').map(c => c + c).join('');
                }
                if ((color.length === 6 || color.length === 3) && /^[0-9a-f]+$/i.test(color)) {
                    if (color.length === 6) {
                        document.getElementById('textColor').value = '#' + color;
                        if (isInitialized) generateImage();
                    }
                }
            });

            // Size validation
            ['width', 'height'].forEach(id => {
                document.getElementById(id).addEventListener('input', function() {
                    let value = parseInt(this.value);
                    if (isNaN(value) || value < 1) {
                        this.value = 1;
                    } else if (value > 2000) {
                        this.value = 2000;
                    }
                    if (isInitialized) generateImage();
                });
            });

            // Other input listeners
            ['customText', 'fontSize', 'format'].forEach(id => {
                document.getElementById(id).addEventListener('input', function() {
                    if (isInitialized) generateImage();
                });
            });

            // Font size slider
            document.getElementById('fontSize').addEventListener('input', function() {
                document.getElementById('fontSizeValue').textContent = this.value;
                if (isInitialized) generateImage();
            });

            // Hash change listener
            window.addEventListener('hashchange', handleHashParameters);
        }

        // Generate image with proper error handling and validation
        function generateImage() {
            try {
                const width = Math.max(1, Math.min(2000, parseInt(document.getElementById('width').value) || 400));
                const height = Math.max(1, Math.min(2000, parseInt(document.getElementById('height').value) || 300));
                
                let bgColorValue = document.getElementById('bgColorText').value.replace('#', '').toLowerCase();
                let textColorValue = document.getElementById('textColorText').value.replace('#', '').toLowerCase();
                
                // Handle 3-character hex codes
                if (bgColorValue.length === 3) {
                    bgColorValue = bgColorValue.split('').map(c => c + c).join('');
                }
                if (textColorValue.length === 3) {
                    textColorValue = textColorValue.split('').map(c => c + c).join('');
                }
                
                // Validate hex colors
                if (!/^[0-9a-f]{6}$/i.test(bgColorValue)) {
                    bgColorValue = 'cccccc';
                    document.getElementById('bgColorText').value = bgColorValue;
                    document.getElementById('bgColor').value = '#' + bgColorValue;
                }
                
                if (!/^[0-9a-f]{6}$/i.test(textColorValue)) {
                    textColorValue = '333333';
                    document.getElementById('textColorText').value = textColorValue;
                    document.getElementById('textColor').value = '#' + textColorValue;
                }

                const bgColor = '#' + bgColorValue;
                const textColor = '#' + textColorValue;
                const customText = document.getElementById('customText').value;
                const fontSize = Math.max(8, Math.min(72, parseInt(document.getElementById('fontSize').value) || 24));
                const format = document.getElementById('format').value || 'png';

                const canvas = document.getElementById('previewCanvas');
                const ctx = canvas.getContext('2d');

                // Set canvas size
                canvas.width = width;
                canvas.height = height;

                // Fill background
                ctx.fillStyle = bgColor;
                ctx.fillRect(0, 0, width, height);

                // Calculate optimal font size based on canvas size if not custom text
                let actualFontSize = fontSize;
                if (!customText) {
                    const minDimension = Math.min(width, height);
                    actualFontSize = Math.max(12, Math.min(fontSize, minDimension / 8));
                }

                // Draw text
                const text = customText || `${width} × ${height}`;
                ctx.fillStyle = textColor;
                ctx.font = `${actualFontSize}px Arial, sans-serif`;
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';

                // Handle multi-line text (both \n and actual line breaks)
                const lines = text.split(/\\n|\n/);
                const lineHeight = actualFontSize * 1.3;
                const totalHeight = lines.length * lineHeight;
                const startY = (height - totalHeight) / 2 + lineHeight / 2;

                lines.forEach((line, index) => {
                    const y = startY + (index * lineHeight);
                    
                    // Check if text fits horizontally
                    const metrics = ctx.measureText(line);
                    if (metrics.width > width - 20) {
                        // Scale font size to fit
                        const scaleFactor = (width - 20) / metrics.width;
                        const scaledFont = Math.max(8, actualFontSize * scaleFactor);
                        ctx.font = `${scaledFont}px Arial, sans-serif`;
                    }
                    
                    ctx.fillText(line, width / 2, y);
                    
                    // Reset font size for next line
                    ctx.font = `${actualFontSize}px Arial, sans-serif`;
                });

                // Store current canvas and data URL
                currentCanvas = canvas;
                
                // Generate data URL with proper format and quality
                if (format === 'jpg' || format === 'jpeg') {
                    currentDataURL = canvas.toDataURL('image/jpeg', 0.9);
                } else if (format === 'webp') {
                    currentDataURL = canvas.toDataURL('image/webp', 0.9);
                } else {
                    currentDataURL = canvas.toDataURL('image/png');
                }

                // Update URL
                updateGeneratedURL();
                
            } catch (error) {
                console.error('Error generating image:', error);
                // Fallback to basic image generation
                const canvas = document.getElementById('previewCanvas');
                const ctx = canvas.getContext('2d');
                canvas.width = 400;
                canvas.height = 300;
                ctx.fillStyle = '#cccccc';
                ctx.fillRect(0, 0, 400, 300);
                ctx.fillStyle = '#333333';
                ctx.font = '24px Arial, sans-serif';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText('400 × 300', 200, 150);
            }
        }

        // Generate hero image
        function generateHeroImage() {
            const canvas = document.getElementById('heroCanvas');
            const ctx = canvas.getContext('2d');

            // Create gradient background
            const gradient = ctx.createLinearGradient(0, 0, 400, 300);
            gradient.addColorStop(0, '#667eea');
            gradient.addColorStop(1, '#764ba2');

            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, 400, 300);

            // Draw text
            ctx.fillStyle = '#ffffff';
            ctx.font = '24px Arial, sans-serif';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText('400 × 300', 200, 150);
        }

        // Update generated URL with proper encoding
        function updateGeneratedURL() {
            try {
                const width = document.getElementById('width').value;
                const height = document.getElementById('height').value;
                const bgColor = document.getElementById('bgColorText').value.toLowerCase();
                const textColor = document.getElementById('textColorText').value.toLowerCase();
                const customText = document.getElementById('customText').value.trim();

                const baseURL = `${window.location.origin}${window.location.pathname}`;
                let url = `${baseURL}#/${width}x${height}`;
                
                // Only add colors if they're different from defaults
                const hasCustomColors = bgColor !== 'cccccc' || textColor !== '333333';
                const hasCustomText = customText.length > 0;
                
                if (hasCustomColors || hasCustomText) {
                    url += `/${bgColor}/${textColor}`;
                    
                    if (hasCustomText) {
                        // Proper URL encoding for text
                        const encodedText = encodeURIComponent(customText)
                            .replace(/'/g, '%27')
                            .replace(/"/g, '%22');
                        url += `/${encodedText}`;
                    }
                }

                document.getElementById('generatedURL').value = url;
            } catch (error) {
                console.error('Error updating URL:', error);
                const baseURL = `${window.location.origin}${window.location.pathname}`;
                document.getElementById('generatedURL').value = `${baseURL}#/400x300`;
            }
        }

        // Set predefined size with validation
        function setSize(width, height) {
            if (width > 0 && height > 0 && width <= 2000 && height <= 2000) {
                document.getElementById('width').value = width;
                document.getElementById('height').value = height;
                generateImage();
            }
        }

        // Download image with proper filename and format
        function downloadImage() {
            if (!currentCanvas || !currentDataURL) {
                generateImage();
                if (!currentDataURL) return;
            }

            try {
                const format = document.getElementById('format').value;
                const width = document.getElementById('width').value;
                const height = document.getElementById('height').value;
                const customText = document.getElementById('customText').value;
                
                // Create descriptive filename
                let filename = `placeholder-${width}x${height}`;
                if (customText) {
                    const safeText = customText.replace(/[^a-zA-Z0-9]/g, '-').substring(0, 20);
                    filename += `-${safeText}`;
                }
                filename += `.${format}`;
                
                const link = document.createElement('a');
                link.download = filename;
                link.href = currentDataURL;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            } catch (error) {
                console.error('Error downloading image:', error);
            }
        }

        // Copy URL to clipboard with better error handling
        async function copyURL() {
            const url = document.getElementById('generatedURL').value;
            if (!url) return;
            
            try {
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    await navigator.clipboard.writeText(url);
                    showToast('URL copied to clipboard!', 'success');
                } else {
                    throw new Error('Clipboard API not available');
                }
            } catch (err) {
                try {
                    // Fallback for older browsers
                    const textArea = document.createElement('textarea');
                    textArea.value = url;
                    textArea.style.position = 'fixed';
                    textArea.style.left = '-999999px';
                    textArea.style.top = '-999999px';
                    document.body.appendChild(textArea);
                    textArea.focus();
                    textArea.select();
                    
                    if (document.execCommand('copy')) {
                        showToast('URL copied to clipboard!', 'success');
                    } else {
                        showToast('Copy failed. Please copy manually.', 'error');
                    }
                    
                    document.body.removeChild(textArea);
                } catch (fallbackError) {
                    showToast('Copy not supported. Please copy manually.', 'error');
                }
            }
        }

        // Enhanced toast notification
        function showToast(message = 'URL copied to clipboard!', type = 'success') {
            const toastElement = document.getElementById('toast');
            const toastBody = toastElement.querySelector('.toast-body');
            
            // Update message and style based on type
            if (type === 'error') {
                toastElement.className = 'toast align-items-center text-white bg-danger border-0';
                toastBody.innerHTML = `<i class="fas fa-exclamation-triangle me-2"></i>${message}`;
            } else {
                toastElement.className = 'toast align-items-center text-white bg-success border-0';
                toastBody.innerHTML = `<i class="fas fa-check-circle me-2"></i>${message}`;
            }
            
            const toast = new bootstrap.Toast(toastElement);
            toast.show();
        }

        // Handle hash parameters with complete URL parsing
        function handleHashParameters() {
            const hash = window.location.hash.substring(1);
            if (!hash || !hash.startsWith('/')) return;

            try {
                const parts = hash.substring(1).split('/');
                if (parts.length < 1) return;

                // Reset to defaults first
                document.getElementById('bgColorText').value = 'cccccc';
                document.getElementById('bgColor').value = '#cccccc';
                document.getElementById('textColorText').value = '333333';
                document.getElementById('textColor').value = '#333333';
                document.getElementById('customText').value = '';

                // Parse size (required)
                const sizeMatch = parts[0].match(/^(\d+)x(\d+)$/i);
                if (sizeMatch) {
                    const width = Math.max(1, Math.min(2000, parseInt(sizeMatch[1])));
                    const height = Math.max(1, Math.min(2000, parseInt(sizeMatch[2])));
                    document.getElementById('width').value = width;
                    document.getElementById('height').value = height;
                }

                // Parse background color (optional)
                if (parts.length >= 2 && parts[1]) {
                    let bgColor = parts[1].replace('#', '').toLowerCase();
                    // Handle 3-character hex codes
                    if (bgColor.length === 3 && /^[0-9a-f]{3}$/i.test(bgColor)) {
                        bgColor = bgColor.split('').map(c => c + c).join('');
                    }
                    if (/^[0-9a-f]{6}$/i.test(bgColor)) {
                        document.getElementById('bgColorText').value = bgColor;
                        document.getElementById('bgColor').value = '#' + bgColor;
                    }
                }

                // Parse text color (optional)
                if (parts.length >= 3 && parts[2]) {
                    let textColor = parts[2].replace('#', '').toLowerCase();
                    // Handle 3-character hex codes
                    if (textColor.length === 3 && /^[0-9a-f]{3}$/i.test(textColor)) {
                        textColor = textColor.split('').map(c => c + c).join('');
                    }
                    if (/^[0-9a-f]{6}$/i.test(textColor)) {
                        document.getElementById('textColorText').value = textColor;
                        document.getElementById('textColor').value = '#' + textColor;
                    }
                }

                // Parse custom text (optional)
                if (parts.length >= 4 && parts[3]) {
                    const customText = decodeURIComponent(parts[3])
                        .replace(/\+/g, ' ') // Handle + as space
                        .replace(/%20/g, ' '); // Handle %20 as space
                    document.getElementById('customText').value = customText;
                }

                // Generate image after parsing all parameters
                generateImage();
                
            } catch (error) {
                console.error('Error parsing URL parameters:', error);
                // Fallback to default generation
                generateImage();
            }
        }

        // Generate examples
        function generateExamples() {
            const examples = [
                { size: '300x200', bg: 'ff6b6b', text: 'ffffff', label: 'Red Background' },
                { size: '400x300', bg: '4ecdc4', text: '333333', label: 'Teal Background' },
                { size: '500x250', bg: '45b7d1', text: 'ffffff', label: 'Blue Background' },
                { size: '350x350', bg: 'f9ca24', text: '333333', label: 'Square Yellow' },
                { size: '600x200', bg: '6c5ce7', text: 'ffffff', label: 'Purple Banner' },
                { size: '250x300', bg: 'a29bfe', text: '333333', label: 'Tall Rectangle' }
            ];

            const container = document.getElementById('examplesContainer');
            
            examples.forEach(example => {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                
                const [width, height] = example.size.split('x').map(Number);
                canvas.width = width;
                canvas.height = height;
                canvas.style.maxWidth = '100%';
                canvas.style.height = 'auto';
                canvas.className = 'img-thumbnail';

                // Draw example
                ctx.fillStyle = '#' + example.bg;
                ctx.fillRect(0, 0, width, height);
                
                ctx.fillStyle = '#' + example.text;
                ctx.font = '16px Arial, sans-serif';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(`${width} × ${height}`, width / 2, height / 2);

                const col = document.createElement('div');
                col.className = 'col-lg-4 col-md-6 mb-4';
                col.innerHTML = `
                    <div class="card h-100">
                        <div class="card-body text-center">
                            ${canvas.outerHTML}
                            <h6 class="card-title mt-3">${example.label}</h6>
                            <p class="card-text text-muted">${example.size}</p>
                            <button class="btn btn-sm btn-outline-primary" onclick="loadExample('${example.size}', '${example.bg}', '${example.text}')">
                                <i class="fas fa-eye me-1"></i>Use This
                            </button>
                        </div>
                    </div>
                `;
                
                container.appendChild(col);
            });
        }

        // Load example with proper validation
        function loadExample(size, bg, text) {
            try {
                const [width, height] = size.split('x').map(num => parseInt(num));
                
                if (width > 0 && height > 0) {
                    document.getElementById('width').value = width;
                    document.getElementById('height').value = height;
                }
                
                if (bg && /^[0-9a-f]{6}$/i.test(bg)) {
                    document.getElementById('bgColorText').value = bg.toLowerCase();
                    document.getElementById('bgColor').value = '#' + bg.toLowerCase();
                }
                
                if (text && /^[0-9a-f]{6}$/i.test(text)) {
                    document.getElementById('textColorText').value = text.toLowerCase();
                    document.getElementById('textColor').value = '#' + text.toLowerCase();
                }
                
                document.getElementById('customText').value = '';
                
                generateImage();
                
                // Smooth scroll to generator
                const targetElement = document.getElementById('generator');
                if (targetElement) {
                    targetElement.scrollIntoView({ 
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            } catch (error) {
                console.error('Error loading example:', error);
            }
        }

        // Responsive canvas sizing and window resize handler
        function handleResize() {
            // Regenerate image to ensure proper scaling
            if (isInitialized) {
                generateImage();
            }
        }

        // Debounced resize handler
        let resizeTimeout;
        window.addEventListener('resize', function() {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(handleResize, 250);
        });

        // Additional utility functions for better functionality

        // Validate and sanitize hex color input
        function validateHexColor(color, defaultColor = 'cccccc') {
            if (!color) return defaultColor;
            
            color = color.replace('#', '').toLowerCase();
            
            // Handle 3-character hex codes
            if (color.length === 3 && /^[0-9a-f]{3}$/i.test(color)) {
                color = color.split('').map(c => c + c).join('');
            }
            
            // Validate 6-character hex code
            if (color.length === 6 && /^[0-9a-f]{6}$/i.test(color)) {
                return color;
            }
            
            return defaultColor;
        }

        // Generate random placeholder for demo
        function generateRandomPlaceholder() {
            const sizes = ['300x200', '400x300', '500x350', '600x400', '800x600'];
            const colors = ['ff6b6b', '4ecdc4', '45b7d1', 'f9ca24', '6c5ce7', 'a29bfe', '00b894', 'fdcb6e'];
            const textColors = ['ffffff', '333333', '000000', '2d3436'];
            
            const randomSize = sizes[Math.floor(Math.random() * sizes.length)];
            const randomBg = colors[Math.floor(Math.random() * colors.length)];
            const randomText = textColors[Math.floor(Math.random() * textColors.length)];
            
            loadExample(randomSize, randomBg, randomText);
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            // Ctrl/Cmd + Enter to generate
            if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
                e.preventDefault();
                generateImage();
            }
            
            // Ctrl/Cmd + C to copy URL (when not in input field)
            if ((e.ctrlKey || e.metaKey) && e.key === 'c' && 
                !['INPUT', 'TEXTAREA'].includes(e.target.tagName)) {
                e.preventDefault();
                copyURL();
            }
            
            // Ctrl/Cmd + D to download
            if ((e.ctrlKey || e.metaKey) && e.key === 'd') {
                e.preventDefault();
                downloadImage();
            }
        });

        // Add accessibility improvements
        document.addEventListener('DOMContentLoaded', function() {
            // Add ARIA labels and roles
            const canvas = document.getElementById('previewCanvas');
            canvas.setAttribute('role', 'img');
            canvas.setAttribute('aria-label', 'Generated placeholder image preview');
            
            // Add keyboard navigation for quick size buttons
            const quickSizeButtons = document.querySelectorAll('button[onclick*="setSize"]');
            quickSizeButtons.forEach(button => {
                button.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        this.click();
                    }
                });
            });
        });
    </script>
</body>
</html>
