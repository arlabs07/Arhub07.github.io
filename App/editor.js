let htmlEditor,cssEditor,jsEditor,currentTab='html',editorMaximized=false,previewMaximized=false,consoleOpen=false,notificationTimeout;const defaultHtml='<h1>Hello World!</h1>\n<p>Start coding here...</p>',defaultCss='body {\n    font-family: Arial, sans-serif;\n    margin: 20px;\n}\n\nh1 {\n    color: #333;\n}',defaultJs='// Add your JavaScript code here\nconsole.log("Hello from JavaScript!");';function showNotification(message,type='info'){clearTimeout(notificationTimeout);const overlay=document.getElementById('notification-overlay'),content=document.getElementById('notification-content');content.innerHTML=`<div class="text-${type==='error'?'red':'green'}-400"><i class="fas fa-${type==='error'?'exclamation-triangle':'check-circle'}"></i> ${message}</div>`;overlay.classList.add('show');notificationTimeout=setTimeout(hideNotification,3000)}function hideNotification(){const overlay=document.getElementById('notification-overlay');overlay.classList.remove('show')}function logToConsole(message,type='log'){const consoleContent=document.getElementById('console-content'),logEntry=document.createElement('div');logEntry.className=`console-log ${type}`;logEntry.textContent=`${new Date().toLocaleTimeString()} - ${message}`;consoleContent.appendChild(logEntry);consoleContent.scrollTop=consoleContent.scrollHeight}function toggleConsole(){const consoleContainer=document.getElementById('console-container');consoleOpen=!consoleOpen;consoleContainer.classList.toggle('show',consoleOpen)}function debounce(func,wait){let timeout;return function(){const context=this,args=arguments;clearTimeout(timeout);timeout=setTimeout(()=>func.apply(context,args),wait)}}function switchTab(tab){try{document.getElementById('html-editor').classList.add('hidden');document.getElementById('css-editor').classList.add('hidden');document.getElementById('js-editor').classList.add('hidden');document.getElementById(tab+'-editor').classList.remove('hidden');document.getElementById('html-tab').classList.remove('tab-active');document.getElementById('css-tab').classList.remove('tab-active');document.getElementById('js-tab').classList.remove('tab-active');document.getElementById(tab+'-tab').classList.add('tab-active');currentTab=tab;logToConsole(`Switched to ${tab.toUpperCase()} tab`)}catch(error){logToConsole(`Error switching tab: ${error.message}`,'error')}}function updatePreview(){try{const html=htmlEditor?htmlEditor.getValue():defaultHtml,css=cssEditor?cssEditor.getValue():defaultCss,js=jsEditor?jsEditor.getValue():defaultJs,iframe=document.getElementById('preview-frame');iframe.srcdoc=`<!DOCTYPE html><html><head><style>${css}</style></head><body>${html}<script>try{${js}}catch(e){console.error('Preview JS Error:',e)}<\/script></body></html>`;logToConsole('Preview updated successfully')}catch(error){logToConsole(`Error updating preview: ${error.message}`,'error')}}function formatCurrentEditor(){try{let editor;switch(currentTab){case 'html':editor=htmlEditor;break;case 'css':editor=cssEditor;break;case 'js':editor=jsEditor;break}if(editor){editor.getAction('editor.action.formatDocument').run();showNotification('Code formatted successfully!','success')}else{throw new Error('No editor found')}}catch(error){logToConsole(`Error formatting code: ${error.message}`,'error');showNotification('Error formatting code','error')}}function flashSaveButton(){const saveBtn=document.getElementById('save-btn');saveBtn.classList.remove('fade-opacity');setTimeout(()=>saveBtn.classList.add('fade-opacity'),500)}function toggleEditorMaximize(){try{const editorContainer=document.getElementById('editor-container'),previewContainer=document.getElementById('preview-container'),maximizeBtn=document.getElementById('maximize-editor'),isMobile=window.innerWidth<=768;if(editorMaximized){if(isMobile){editorContainer.classList.remove('editor-expanded');previewContainer.classList.remove('preview-collapsed')}else{editorContainer.style.width='50%';previewContainer.style.width='50%'}maximizeBtn.innerHTML='<i class="fas fa-expand"></i>'}else{if(isMobile){editorContainer.classList.add('editor-expanded');previewContainer.classList.add('preview-collapsed')}else{editorContainer.style.width='100%';previewContainer.style.width='0%'}maximizeBtn.innerHTML='<i class="fas fa-compress"></i>'}editorMaximized=!editorMaximized;setTimeout(()=>{if(htmlEditor&&cssEditor&&jsEditor){htmlEditor.layout();cssEditor.layout();jsEditor.layout()}},300);logToConsole(`Editor ${editorMaximized?'maximized':'restored'}`)}catch(error){logToConsole(`Error toggling editor: ${error.message}`,'error')}}function togglePreviewMaximize(){try{const editorContainer=document.getElementById('editor-container'),previewContainer=document.getElementById('preview-container'),maximizeBtn=document.getElementById('maximize-preview'),isMobile=window.innerWidth<=768;if(previewMaximized){if(isMobile){previewContainer.classList.remove('preview-expanded');editorContainer.classList.remove('editor-collapsed')}else{previewContainer.style.width='50%';editorContainer.style.width='50%'}maximizeBtn.innerHTML='<i class="fas fa-expand"></i>'}else{if(isMobile){previewContainer.classList.add('preview-expanded');editorContainer.classList.add('editor-collapsed')}else{previewContainer.style.width='100%';editorContainer.style.width='0%'}maximizeBtn.innerHTML='<i class="fas fa-compress"></i>'}previewMaximized=!previewMaximized;logToConsole(`Preview ${previewMaximized?'maximized':'restored'}`)}catch(error){logToConsole(`Error toggling preview: ${error.message}`,'error')}}function copyAllCode(){try{const html=htmlEditor?htmlEditor.getValue():defaultHtml,css=cssEditor?cssEditor.getValue():defaultCss,js=jsEditor?jsEditor.getValue():defaultJs,combinedCode=`<!-- HTML -->\n${html}\n\n<!-- CSS -->\n<style>\n${css}\n</style>\n\n<!-- JavaScript -->\n<script>\n${js}\n<\/script>`;navigator.clipboard.writeText(combinedCode).then(()=>{showNotification('All code copied to clipboard!','success');logToConsole('Code copied to clipboard')}).catch(()=>{const textArea=document.createElement('textarea');textArea.value=combinedCode;document.body.appendChild(textArea);textArea.select();document.execCommand('copy');document.body.removeChild(textArea);showNotification('Code copied to clipboard!','success');logToConsole('Code copied to clipboard (fallback method)')})}catch(error){logToConsole(`Error copying code: ${error.message}`,'error');showNotification('Error copying code','error')}}function downloadAllFiles(){try{const html=htmlEditor?htmlEditor.getValue():defaultHtml,css=cssEditor?cssEditor.getValue():defaultCss,js=jsEditor?jsEditor.getValue():defaultJs,combinedHTML=`<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>My Web Project</title>\n    <style>\n${css}\n    </style>\n</head>\n<body>\n${html}\n    <script>\n${js}\n    <\/script>\n</body>\n</html>`,blob=new Blob([combinedHTML],{type:'text/html'}),url=URL.createObjectURL(blob),a=document.createElement('a');a.href=url;a.download='web-project.html';a.click();URL.revokeObjectURL(url);showNotification('File downloaded successfully!','success');logToConsole('File downloaded as web-project.html')}catch(error){logToConsole(`Error downloading file: ${error.message}`,'error');showNotification('Error downloading file','error')}}function openInBrowser(){try{const html=htmlEditor?htmlEditor.getValue():defaultHtml,css=cssEditor?cssEditor.getValue():defaultCss,js=jsEditor?jsEditor.getValue():defaultJs,combinedHTML=`<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>My Web Project</title>\n    <style>\n${css}\n    </style>\n</head>\n<body>\n${html}\n    <script>\n${js}\n    <\/script>\n</body>\n</html>`,blob=new Blob([combinedHTML],{type:'text/html'}),url=URL.createObjectURL(blob);window.open(url,'_blank');showNotification('Opened in new tab!','success');logToConsole('Project opened in new browser tab')}catch(error){logToConsole(`Error opening in browser: ${error.message}`,'error');showNotification('Error opening in browser','error')}}require.config({paths:{'vs':'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.33.0/min/vs'}});require(['vs/editor/editor.main'],function(){try{htmlEditor=monaco.editor.create(document.getElementById('html-editor'),{value:defaultHtml,language:'html',theme:'vs-dark',automaticLayout:true,minimap:{enabled:false}});cssEditor=monaco.editor.create(document.getElementById('css-editor'),{value:defaultCss,language:'css',theme:'vs-dark',automaticLayout:true,minimap:{enabled:false}});jsEditor=monaco.editor.create(document.getElementById('js-editor'),{value:defaultJs,language:'javascript',theme:'vs-dark',automaticLayout:true,minimap:{enabled:false}});updatePreview();htmlEditor.onDidChangeModelContent(debounce(updatePreview,1000));cssEditor.onDidChangeModelContent(debounce(updatePreview,1000));jsEditor.onDidChangeModelContent(debounce(updatePreview,1000));document.getElementById('html-tab').addEventListener('click',()=>switchTab('html'));document.getElementById('css-tab').addEventListener('click',()=>switchTab('css'));document.getElementById('js-tab').addEventListener('click',()=>switchTab('js'));document.getElementById('save-btn').addEventListener('click',()=>{formatCurrentEditor();updatePreview();flashSaveButton()});document.getElementById('copy-btn').addEventListener('click',copyAllCode);document.getElementById('download-btn').addEventListener('click',downloadAllFiles);document.getElementById('open-browser-btn').addEventListener('click',openInBrowser);document.getElementById('console-btn').addEventListener('click',toggleConsole);document.getElementById('console-close').addEventListener('click',toggleConsole);document.getElementById('refresh-preview').addEventListener('click',updatePreview);document.getElementById('maximize-editor').addEventListener('click',toggleEditorMaximize);document.getElementById('maximize-preview').addEventListener('click',togglePreviewMaximize);document.getElementById('notification-close').addEventListener('click',hideNotification);document.getElementById('notification-overlay').addEventListener('click',function(e){if(e.target===this)hideNotification()});window.addEventListener('resize',debounce(function(){if(htmlEditor&&cssEditor&&jsEditor){htmlEditor.layout();cssEditor.layout();jsEditor.layout()}},100));logToConsole('Web Code Editor initialized successfully')}catch(error){logToConsole(`Initialization error: ${error.message}`,'error');showNotification('Error initializing editor','error')}});
